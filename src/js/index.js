function firstBoot(){localStorage.setItem("theme","regular"),localStorage.setItem("autoDate","true"),localStorage.setItem("offlineString","please set text for no-stream days");let e=moment().tz(Intl.DateTimeFormat().resolvedOptions().timeZone).zoneAbbr();localStorage.setItem("utc_gmt","UTC"),localStorage.setItem("timezone",e),localStorage.setItem("offsetOverwrite","none"),localStorage.setItem("autoDate","true"),localStorage.setItem("logo","none"),localStorage.setItem("logoScale","100"),localStorage.setItem("rememberSchedule","true"),localStorage.setItem("streamTitle-monday",""),localStorage.setItem("streamTime-monday",""),localStorage.setItem("streamTitle-tuesday",""),localStorage.setItem("streamTime-tuesday",""),localStorage.setItem("streamTitle-wednesday",""),localStorage.setItem("streamTime-wednesday",""),localStorage.setItem("streamTitle-thursday",""),localStorage.setItem("streamTime-thursday",""),localStorage.setItem("streamTitle-friday",""),localStorage.setItem("streamTime-friday",""),localStorage.setItem("streamTitle-saturday",""),localStorage.setItem("streamTime-saturday",""),localStorage.setItem("streamTitle-sunday",""),localStorage.setItem("streamTime-sunday",""),localStorage.setItem("firstBoot","false")}function initialize(){null===localStorage.getItem("firstBoot")&&firstBoot();let e=localStorage.getItem("offlineString"),t=localStorage.getItem("autoDate");e&&$(".streamTitle").attr("placeholder",e),t&&("true"==t?($("#inpAutoWeek").prop("checked",!0),setDateDisplay(getNextMonday())):$("#inpAutoWeek").prop("checked",!1)),$("#selectSort").val("none"),$("#inpPeekNG").prop("checked",!1),$("#inpZoom").val(100),setMedia(),loadTimezone(),loadSchedule()}function getNextMonday(){let e=new Date;return e.setDate(e.getDate()+(8-e.getDay())%7),e}function setMedia(){makeFont(MEDIA_FONT);let e=localStorage.getItem("logo");"none"!=e?($("footer>figure").css({"background-image":`url(${e})`,"background-size":`${localStorage.getItem("logoScale")}%`}),$("#inpZoomLogo").val(localStorage.getItem("logoScale"))):$("footer>figure").css("background-image","url(src/img/your-logo.png)"),$(".day>.backdrop>.sparkles").html(SVG_SCHEDULE_ACTIVE);const t={monday:{dayCode:"svgDayM",dayFront:"#EB8F9A",dayBack:"#BF4A5F",textCol:"#D72137",decoFront:"#9D3541",decoBack:"#651A27"},tuesday:{dayCode:"svgDayT",dayFront:"#EBAB8F",dayBack:"#BF824A",textCol:"#D75921",decoFront:"#9D6635",decoBack:"#653B1A"},wednesday:{dayCode:"svgDayW",dayFront:"#EBDB8F",dayBack:"#BFB44A",textCol:"#D7B721",decoFront:"#9D8C35",decoBack:"#655E1A"},thursday:{dayCode:"svgDayT",dayFront:"#ACEB8F",dayBack:"#4ABF57",textCol:"#5BD721",decoFront:"#3C9D35",decoBack:"#1A651A"},friday:{dayCode:"svgDayF",dayFront:"#8FC8EB",dayBack:"#4A78BF",textCol:"#2193D7",decoFront:"#35539D",decoBack:"#1A3B65"},saturday:{dayCode:"svgDayS",dayFront:"#C38FEB",dayBack:"#9A4ABF",textCol:"#8921D7",decoFront:"#73359D",decoBack:"#4C1A65"},sunday:{dayCode:"svgDayS",dayFront:"#EB8FE2",dayBack:"#BF4AB6",textCol:"#D721C7",decoFront:"#9D3593",decoBack:"#651A5A"}};for(const e in t)$(`.day[data-day="${e}"] .overlay>.dayStar`).html(SVG_SPARKLE_DAY),$(`.day[data-day="${e}"] .overlay>.dayStar>.svgDay .svgDayBack>path`).css("fill",t[e].dayBack),$(`.day[data-day="${e}"] .overlay>.dayStar>.svgDay .svgDayFront>path`).css("fill",t[e].dayFront),$(`.day[data-day="${e}"] .overlay>.dayStar>.svgDay .${t[e].dayCode}`).attr("visibility","visible"),$(`.day[data-day="${e}"] .overlay>.dayStar>.svgDay .${t[e].dayCode}>path`).css("fill",t[e].textCol),$(`.day[data-day="${e}"] .overlay .timeBG`).html(SVG_TIME_PLANET),$(`.day[data-day="${e}"] .overlay .timeBG>.svgTimePlanet .svgTimePlanetBack>path`).css("fill",t[e].decoBack),$(`.day[data-day="${e}"] .overlay .timeBG>.svgTimePlanet .svgTimePlanetFront>path`).css("fill",t[e].decoFront),$(`.day[data-day="${e}"] .overlay .activeR`).html(SVG_SPARKLE_R),$(`.day[data-day="${e}"] .overlay .activeR>.svgSparkR .svgSparkRBack>path`).css("fill",t[e].decoBack),$(`.day[data-day="${e}"] .overlay .activeR>.svgSparkR .svgSparkRFront>path`).css("fill",t[e].decoFront),$(`.day[data-day="${e}"] .overlay .activeL`).html(SVG_SPARKLE_L),$(`.day[data-day="${e}"] .overlay .activeL>.svgSparkL .svgSparkLBack>path`).css("fill",t[e].decoBack),$(`.day[data-day="${e}"] .overlay .activeL>.svgSparkL .svgSparkLFront>path`).css("fill",t[e].decoFront);$("#imgLogo").attr("src",MEDIA_SCHEDULE_LOGO);let a=localStorage.getItem("theme")||"regular";$("#inpTheme").val(a),setTheme(a)}function setTheme(e){let t={regular:{bg:MEDIA_REGULAR_BG,fg:MEDIA_REGULAR_FG,imgMask:MEDIA_REGULAR_IMG_MASK,imgX:5,imgY:5,imgW:45,imgH:60,imgAlpha:1,imgBlend:"hard-light",imgBack:MEDIA_BLANK_IMAGE,imgBackX:0,imgBackY:0,imgBackW:0,imgBackH:0,imgFront:MEDIA_BLANK_IMAGE,imgFrontX:0,imgFrontY:0,imgFrontW:0,imgFrontH:0,filter:"unset"},pastel:{bg:MEDIA_PASTEL_BG,fg:MEDIA_BLANK_IMAGE,imgMask:MEDIA_PASTEL_IMG_MASK,imgX:-2,imgY:2,imgW:58,imgH:70,imgAlpha:.9,imgBlend:"normal",imgBack:MEDIA_PASTEL_IMG_BACK,imgBackX:-2,imgBackY:2,imgBackW:58,imgBackH:70,imgFront:MEDIA_BLANK_IMAGE,imgFrontX:0,imgFrontY:0,imgFrontW:0,imgFrontH:0,filter:"unset"},empty:{bg:MEDIA_EMPTY_BG,fg:MEDIA_EMPTY_FG,imgMask:MEDIA_EMPTY_IMG_MASK,imgX:0,imgY:2,imgW:57,imgH:70,imgAlpha:.7,imgBlend:"hard-light",imgBack:MEDIA_BLANK_IMAGE,imgBackX:0,imgBackY:0,imgBackW:0,imgBackH:0,imgFront:MEDIA_BLANK_IMAGE,imgFrontX:0,imgFrontY:0,imgFrontW:0,imgFrontH:0,filter:"brightness(1) grayscale(0.2) contrast(1) saturate(0.5)"},satellite:{bg:MEDIA_SATELLITE_BG,fg:MEDIA_BLANK_IMAGE,imgMask:MEDIA_SATELLITE_IMG_MASK,imgX:0,imgY:5,imgW:57,imgH:72,imgAlpha:.9,imgBlend:"hard-light",imgBack:MEDIA_SATELLITE_IMG_BACK,imgBackX:-15,imgBackY:-7,imgBackW:92,imgBackH:92,imgFront:MEDIA_SATELLITE_IMG_FRONT,imgFrontX:-17,imgFrontY:-7,imgFrontW:90,imgFrontH:90,filter:"unset"},moon:{bg:MEDIA_MOON_BG,fg:MEDIA_MOON_FG,imgMask:MEDIA_MOON_IMG_MASK,imgX:0,imgY:5,imgW:55,imgH:65,imgAlpha:1,imgBlend:"normal",imgBack:MEDIA_BLANK_IMAGE,imgBackX:0,imgBackY:0,imgBackW:0,imgBackH:0,imgFront:MEDIA_MOON_IMG_FRONT,imgFrontX:-14,imgFrontY:-3.5,imgFrontW:83,imgFrontH:83,filter:"unset"}};$("#schedule").css("background-image",`url(${t[e].bg})`),$("#scheduleFG").css("background-image",`url(${t[e].fg})`),$("#art").css({"mask-image":`url(${t[e].imgMask})`,right:`${t[e].imgX}%`,top:`${t[e].imgY}%`,width:`${t[e].imgW}%`,height:`${t[e].imgH}%`,opacity:`${t[e].imgAlpha}`,"mix-blend-mode":`${t[e].imgBlend}`}),$("#artFront").css({"background-image":`url(${t[e].imgFront})`,right:`${t[e].imgFrontX}%`,top:`${t[e].imgFrontY}%`,width:`${t[e].imgFrontW}%`,height:`${t[e].imgFrontH}%`}),$("#artBack").css({"background-image":`url(${t[e].imgBack})`,right:`${t[e].imgBackX}%`,top:`${t[e].imgBackY}%`,width:`${t[e].imgBackW}%`,height:`${t[e].imgBackH}%`}),$(":root").css("--schedule-filter",`${t[e].filter}`)}async function makeFont(e){$("head").append(`<style>\n        @font-face{    \n            font-family: custFont1;\n            src: url(${e});\n        }\n    </style>`)}function getTextWidth(e,t){const a=getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas")),o=a.getContext("2d");o.font=t;const n=o.measureText(e);return n.width}function getCssStyle(e,t){return e.css(t)}function getCanvasFont(e=document.body){const t=getCssStyle(e,"font-weight")||"normal",a=getCssStyle(e,"font-size")||"16px",o=getCssStyle(e,"font-family")||"Times New Roman";return`${t} ${a} ${o}`}function scaler(){let e=window.innerHeight,t=window.innerWidth,a=document.querySelector("#schedule"),o=document.querySelector("#scheduleInteractions");a.classList.remove("sizeWidth","sizeHeight"),o.classList.remove("sizeWidth","sizeHeight"),t/16>e/9?(a.classList.add("sizeHeight"),o.classList.add("sizeHeight")):(a.classList.add("sizeWidth"),o.classList.add("sizeWidth"));let n=a.offsetHeight,i=(document.querySelector(":root"),{dates:4,info:2,title:3.5,notitle:2.5}),s={dates:qr(n*i.dates*.01,1),info:qr(n*i.info*.01,1),title:qr(n*i.title*.01,1),notitle:qr(n*i.notitle*.01,1)};$(":root").css({"--font-size-dates":`${s.dates}px`,"--font-size-info":`${s.info}px`,"--font-size-title":`${s.title}px`,"--font-size-notitle":`${s.notitle}px`});let l=$("#schedule").innerWidth(),r=l/1920*20;$(".day>.backdrop>.backdropCol").css("box-shadow",`0 0 ${r}px ${r}px black`)}function setStream(){let e=75,t=110,a=1,o=.73,n=$(this),i=$(this).attr("data-day");if($(this).val()){$(`.day[data-day=${i}] .backdropCol`).removeClass("noStream"),$(`.streamInfo[data-day=${i}]`).removeClass("hidden"),$(`.day[data-day=${i}] .sparkles`).removeClass("hidden");let s=getTextWidth(n.val(),getCanvasFont(n)),l=$(`.backdropCol[data-day=${i}]`).width();if(s/l*100>e){let i=mapRange(e,t,a,o,s/l*100),r=mapRange(e,t,1.15,1,s/l*100);if(n.css("transform",`scaleX(${i}) scaleY(${r})`),i==o){let e=n.val().length;n.attr("maxlength",e)}else n.removeAttr("maxlength")}else n.css("transform","scaleX(1) scaleY(1.15)")}else $(`.streamInfo[data-day=${i}]`).addClass("hidden"),$(`.day[data-day=${i}] .sparkles`).addClass("hidden"),n.css("transform","scaleX(1) scaleY(1.15)"),$(`.streamInfo[data-day=${i}] .streamTime`).val(""),localStorage.setItem(`streamTime-${i}`,""),$(`.day[data-day=${i}] .backdropCol`).addClass("noStream")}function setDateDisplay(e){let t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan"],a=0==e?$("#inpDate").val():e,o=new Date(a),n=new Date(o.toUTCString());n.setDate(n.getDate()+6),$("#dateStart").text(`${t[o.getUTCMonth()]} ${o.getUTCDate()}`),$("#dateEnd").text(`${t[n.getUTCMonth()]} ${n.getUTCDate()}`)}function setImage(e,t){let a=document.querySelector(e);if(!a.value.length)return;let o=new FileReader;o.onload=function(a){let o=a.target.result;if("IMG"==$(t).prop("tagName")?$(t).attr("src",o):$(t).css("background-image",`url(${o})`),"#fileLogo"==e)try{localStorage.setItem("logo",o.toString())}catch(e){console.log("FAILED TO SAVE LOGO PATH\n----------------------------\n   > ${error}")}},o.readAsDataURL(a.files[0])}function setArtistInput(){let e=15,t=60,a=$("footer>p").innerWidth(),o=$("#inpArtist"),n=getTextWidth(o.val(),getCanvasFont(o)),i=n/a*100+10;i>t-3&&o.attr("maxlength",o.val().length),o.css("width",`${clamp(e,t,i)}%`)}function loadTimezone(){let e,t=$("input[name='utc_gmt']:checked").val(),a=localStorage.getItem("timezone"),o=TZ_ALL;"none"==localStorage.getItem("offsetOverwrite")?(e=o[a],"utc"==t&&(e=e.replace("GMT","UTC"))):e=localStorage.getItem("offsetOverwrite"),$("#tzAbbr").attr("value",a),$("#tzOffset").attr("value",e),$("#timezoneSettings>p>span").text(`${a}/${e}`),$("#timezone").html(`${a}<br>${t}${e}`)}function setAbbreviations(){$("#tzAbbr").html("<option value='' selected='selected' disabled>-SELECT TIMEZONE-</option>");let e=$(this).val(),t=TZ_OFFSETS;for(let a=0;a<t[e].length;a++)$("#tzAbbr").append(`<option value="${t[e][a]}">${t[e][a]}</option>`);$("tr.disabled").removeClass("disabled")}function setTimezoneFromDropdown(){let e=$("input[name='utc_gmt']:checked").val(),t=$("#tzAbbr").val();$("#tzAbbr").val()in TZ_ALL&&$("#tzOffset").val(TZ_ALL[t]),$("#timezone").html(`${t}<br>${e}${TZ_ALL[t]}`)}function setTimezoneManually(){let e=$("#tzAbbr").val(),t=$("#tzOffset").val(),a=$("input[name='utc_gmt']:checked").val();$("#timezone").html(`${e}<br>${a}${t}`)}function swapUTC(){let e=$("input[name='utc_gmt']:checked").val().toUpperCase(),t=$("#timezone").html().toUpperCase().replace("UTC",e).replace("GMT",e);$("#timezone").html(t)}function rememberSchedule(){let e=$(this).attr("class"),t=$(this).attr("data-day");localStorage.setItem(`${e}-${t}`,$(this).val())}function loadSchedule(){let e=localStorage.getItem("rememberSchedule");if("true"==e){let e={};for(day in e.monday={title:localStorage.getItem("streamTitle-monday"),time:localStorage.getItem("streamTime-monday")},e.tuesday={title:localStorage.getItem("streamTitle-tuesday"),time:localStorage.getItem("streamTime-tuesday")},e.wednesday={title:localStorage.getItem("streamTitle-wednesday"),time:localStorage.getItem("streamTime-wednesday")},e.thursday={title:localStorage.getItem("streamTitle-thursday"),time:localStorage.getItem("streamTime-thursday")},e.friday={title:localStorage.getItem("streamTitle-friday"),time:localStorage.getItem("streamTime-friday")},e.saturday={title:localStorage.getItem("streamTitle-saturday"),time:localStorage.getItem("streamTime-saturday")},e.sunday={title:localStorage.getItem("streamTitle-sunday"),time:localStorage.getItem("streamTime-sunday")},e)$(`.streamTitle[data-day=${day}]`).val(e[day].title),$(`.streamTime[data-day=${day}]`).val(e[day].time),""!=e[day].title?($(`.streamInfo[data-day=${day}]`).removeClass("hidden"),$(`.day[data-day=${day}] .sparkles`).removeClass("hidden"),$(`.day[data-day=${day}] .backdropCol`).removeClass("noStream")):$(`.day[data-day=${day}] .backdropCol`).addClass("noStream");$("#inpRemember").prop("checked",!0)}else localStorage.setItem("streamTitle-monday",""),localStorage.setItem("streamTitle-tuesday",""),localStorage.setItem("streamTitle-wednesday",""),localStorage.setItem("streamTitle-thursday",""),localStorage.setItem("streamTitle-friday",""),localStorage.setItem("streamTitle-saturday",""),localStorage.setItem("streamTitle-sunday",""),localStorage.setItem("streamTime-monday",""),localStorage.setItem("streamTime-tuesday",""),localStorage.setItem("streamTime-wednesday",""),localStorage.setItem("streamTime-thursday",""),localStorage.setItem("streamTime-friday",""),localStorage.setItem("streamTime-saturday",""),localStorage.setItem("streamTime-sunday",""),$("#inpRemember").prop("checked",!1)}function getData(){let e=$("#inpPeekNG").prop("checked")?$("#peekArt"):$("#containArt"),t={monday:{title:$('.streamTitle[data-day="monday"]').val(),time:$('.streamTime[data-day="monday"]').val()},tuesday:{title:$('.streamTitle[data-day="tuesday"]').val(),time:$('.streamTime[data-day="tuesday"]').val()},wednesday:{title:$('.streamTitle[data-day="wednesday"]').val(),time:$('.streamTime[data-day="wednesday"]').val()},thursday:{title:$('.streamTitle[data-day="thursday"]').val(),time:$('.streamTime[data-day="thursday"]').val()},friday:{title:$('.streamTitle[data-day="friday"]').val(),time:$('.streamTime[data-day="friday"]').val()},saturday:{title:$('.streamTitle[data-day="saturday"]').val(),time:$('.streamTime[data-day="saturday"]').val()},sunday:{title:$('.streamTitle[data-day="sunday"]').val(),time:$('.streamTime[data-day="sunday"]').val()},graphics:{theme:localStorage.getItem("theme"),art:e.attr("src"),artObjPos:e.css("object-position"),artLeft:e[0].style.left,artTop:e[0].style.top,artScale:e.attr("data-scale"),peek:$("#inpPeekNG").prop("checked"),dateStart:$("#dateStart").text(),dateEnd:$("#dateEnd").text(),offlineString:localStorage.getItem("offlineString"),utc_gmt:localStorage.getItem("utc_gmt"),timezone:$("#timezone").html(),artist:$("#inpArtist").val()}};return t}function saveImage(){let e=getData(),t=!!(e.monday.title&&e.monday.time||!e.monday.title&&!e.monday.time),a=!!(e.tuesday.title&&e.tuesday.time||!e.tuesday.title&&!e.tuesday.time),o=!!(e.wednesday.title&&e.wednesday.time||!e.wednesday.title&&!e.wednesday.time),n=!!(e.thursday.title&&e.thursday.time||!e.thursday.title&&!e.thursday.time),i=!!(e.friday.title&&e.friday.time||!e.friday.title&&!e.friday.time),s=!!(e.saturday.title&&e.saturday.time||!e.saturday.title&&!e.saturday.time),l=!!(e.sunday.title&&e.sunday.time||!e.sunday.title&&!e.sunday.time);const r=()=>"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="==e.graphics.art||""!=e.graphics.artist;let m=r();if(t&&a&o&&n&&i&&s&&l)if(m){let e=$("footer>figure").css("background-image");e.includes("your-logo.png")&&$("footer>figure").css("background-image","unset"),$("body").addClass("saving");const t={w:$("#schedule").innerWidth(),h:$("#schedule").innerHeight()};$("#schedule").addClass("noPointer");const a=document.getElementById("schedule");domtoimage.toPng(a,{width:t.w,height:t.h}).then(t=>{const a=document.createElement("a");a.download="schedule.png",a.href=t,a.click(),$("footer>figure").css("background-image",e),$("body").removeClass("saving"),$("#schedule").removeClass("noPointer")}).catch(t=>{console.error("Error converting to image:",t),$("footer>figure").css("background-image",e),$("#schedule").css({width:"",height:""}),$("#schedule").removeClass("noPointer")})}else alert("Please credit the artist");else alert("Please make sure you set times for every stream you've planned")}function saveJson(){let e=getData(),t=!!(e.monday.title&&e.monday.time||!e.monday.title&&!e.monday.time),a=!!(e.tuesday.title&&e.tuesday.time||!e.tuesday.title&&!e.tuesday.time),o=!!(e.wednesday.title&&e.wednesday.time||!e.wednesday.title&&!e.wednesday.time),n=!!(e.thursday.title&&e.thursday.time||!e.thursday.title&&!e.thursday.time),i=!!(e.friday.title&&e.friday.time||!e.friday.title&&!e.friday.time),s=!!(e.saturday.title&&e.saturday.time||!e.saturday.title&&!e.saturday.time),l=!!(e.sunday.title&&e.sunday.time||!e.sunday.title&&!e.sunday.time);const r=()=>"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="==e.graphics.art||""!=e.graphics.artist;let m=r();if(t&&a&o&&n&&i&&s&&l)if(m){let t=JSON.stringify(e);const a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","schedule.json"),a.click()}else alert("Please credit the artist");else alert("Please make sure you set times for every stream you've planned")}const qr=function(e,t){return Math.round(e*10**t)/10**t},to_ang=function(e){let t=e*(180/Math.PI);return t},to_rad=function(e){let t=e*Math.PI/180;return t},clamp=function(e,t,a){return Math.min(t,Math.max(e,a))},mapRange=function(e,t,a,o,n){let i,s=a+(n-e)/(t-e)*(o-a);return i=a<o?clamp(a,o,s):clamp(o,a,s),i},calculateDistance=function(e,t,a,o){const n=a-e,i=o-t;return Math.sqrt(n*n+i*i)},lengthdir_x=function(e,t){let a,o=e,n=to_rad(t);return a=Math.cos(n)*o,a},lengthdir_y=function(e,t){let a,o=e,n=to_rad(t);return a=Math.sin(n)*o,a};let offlineString="init",info={};$(document).ready(function(){initialize()}),$(window).resize(scaler),$(window).ready(scaler),$(document).on("input",".streamTitle",setStream),$(window).ready(setStream),$(document).on("click","#inpDate",function(){this.showPicker()}),$(document).on("input","#inpDate",function(){setDateDisplay(0)}),$(document).on("submit","#formArt",function(e){e.preventDefault();let t=$("#inpPeekNG").is(":checked")?$("#peekArt"):$("#containArt");setImage("#fileArt",t)}),$(".scheduleRight>figure").on("mousedown",function(e){$(".scheduleRight>figure").css("cursor","grabbing");let t=mouseStart={x:e.pageX,y:e.pageY};const a=10,o=$("#inpZoom").val();let n,i,s=!1,l={};$("#inpPeekNG").is(":checked")?(n=$(".scheduleRight>figure"),i=$("#peekArt"),l.min=-100,l.max=100):(n=$("#art"),i=$("#containArt"),l.min=0,l.max=100);let r={w:parseInt(n.css("width")),h:parseInt(n.css("height"))},m=i.css("object-position").replace("%","").split(" "),d={x:parseInt(m[0]),y:parseInt(m[1])},c={x:parseInt(i[0].style.left||0),y:parseInt(i[0].style.top||0)};console.log(c);let g={},u={},y=100*mapRange(100,300,0,1,o);$(document).on("mousemove",function(e){let n=mouseCurrent={x:e.pageX,y:e.pageY};$("#inpPeekNG").is(":checked")?(g.x=d.x,g.y=d.y,u.x=clamp(l.min,l.max,c.x+(n.x-t.x)*((l.max-l.min)/r.w)*.5),u.y=clamp(l.min,l.max,c.y+(n.y-t.y)*((l.max-l.min)/r.h)*.5)):(g.x=d.x-(n.x-t.x)*((l.max-l.min)/r.w)*(100/o*1),g.y=d.y-(n.y-t.y)*((l.max-l.min)/r.h)*(100/o*1),u.x=clamp(-y,y,c.x+(n.x-t.x)*((l.max-l.min)/r.w)*mapRange(100,300,0,1,o)),u.y=clamp(-y,y,c.y+(n.y-t.y)*((l.max-l.min)/r.h)*mapRange(100,300,0,1,o))),calculateDistance(t.x,t.y,n.x,n.y)>a&&(s=!0,$(".scheduleRight>figure").css("cursor","move")),s&&(i.css("object-position",`${qr(clamp(l.min,l.max,g.x),0)}% ${qr(clamp(l.min,l.max,g.y),0)}%`),i.css({left:`${qr(u.x,0)}%`,top:`${qr(u.y,0)}%`}))}),$(document).on("mouseup",function(){$(".scheduleRight>figure").off("mouseup"),$(document).off("mouseup"),$(document).off("mousemove"),$(".scheduleRight>figure").css("cursor","pointer"),s||$("#fileArt").trigger("click")}),e.preventDefault()}),$(".scheduleRight>figure").on("selectstart",function(e){e.preventDefault()}),$(document).on("change","#fileArt",function(){$(".scheduleRight>figure").attr("data-content",""),$("#formArt").trigger("submit")});const togglePeekNG=function(){let e,t=$("#inpPeekNG").is(":checked");t?("data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="==$(".scheduleRight>figure>#peekArt").attr("src")&&$(".scheduleRight>figure").attr("data-content","Click to add Image"),$(".scheduleRight>figure>#peekArt").removeClass("hidden"),$(".scheduleRight>figure>*:not(#peekArt)").addClass("hidden"),e=$("#peekArt").attr("data-scale")):($(".scheduleRight>figure").attr("data-content",""),$(".scheduleRight>figure>#peekArt").addClass("hidden"),$(".scheduleRight>figure>*:not(#peekArt)").removeClass("hidden"),e=$("#containArt").attr("data-scale")),$("#inpZoom").val(100*e)};$(document).on("change","#inpPeekNG",togglePeekNG);const zoomShow=function(e){$("#zoomContainer").css("transition","opacity 0.5s ease"),$("#zoomContainer").removeClass("hidden"),$(".scheduleRight>figure").on("mouseleave",function(){$("#zoomContainer").css("transition","opacity 0.5s 0.4s ease"),$("#zoomContainer").addClass("hidden")}),e.preventDefault()};$(".scheduleRight>figure").on("mouseenter",function(e){zoomShow(e)}),$("#zoomContainer").on("mouseenter",function(e){zoomShow(e)}),$(document).on("mousedown","#inpZoom",function(){let e;$("#inpPeekNG").is(":checked")?(c=$(".scheduleRight>figure"),e=$("#peekArt")):(c=$("#art"),e=$("#containArt"));let t={x:parseInt(e.css("left").replace("px","").replace("%","")),y:parseInt(e.css("top").replace("px","").replace("%",""))},a={w:parseInt(c.css("width").replace("px","").replace("%","")),h:parseInt(c.css("height").replace("px","").replace("%",""))},o={x:a.w*mapRange(100,300,0,1,$("#inpZoom").val()),y:a.h*mapRange(100,300,0,1,$("#inpZoom").val())},n={x:t.x/o.x||0,y:t.y/o.y||0};$(document).on("input","#inpZoom",function(){e.css("transform",`scale(${$(this).val()/100})`),e.attr("data-scale",$(this).val()/100),o={x:a.w*mapRange(100,300,0,1,$("#inpZoom").val()),y:a.h*mapRange(100,300,0,1,$("#inpZoom").val())},e.css({left:`${n.x*o.x/a.w*100}%`,top:`${n.y*o.y/a.h*100}%`})}),$(document).on("mouseup","#inpZoom",function(){$(document).off("input","#inpZoom"),$(document).off("mouseup","#inpZoom")})}),$(document).on("submit","#formLogo",function(e){e.preventDefault(),setImage("#fileLogo","footer>figure")}),$("footer>figure").on("click",function(){$("#fileLogo").trigger("click")}),$(document).on("change","#fileLogo",function(){$("#formLogo").trigger("submit")});const logoZoomShow=function(e){$("#zoomLogo").css("transition","opacity 0.5s ease"),$("#zoomLogo").removeClass("hidden"),$("footer").on("mouseleave",function(){$("#zoomLogo").css("transition","opacity 0.5s 0.4s ease"),$("#zoomLogo").addClass("hidden")}),$("#zoomLogo").on("mouseleave",function(){$("#zoomLogo").css("transition","opacity 0.5s 0.4s ease"),$("#zoomLogo").addClass("hidden")}),e.preventDefault()};$("footer").on("mouseenter",function(e){logoZoomShow(e)}),$("#zoomLogo").on("mouseenter",function(e){logoZoomShow(e)}),$(document).on("input","#inpZoomLogo",function(){let e=$("footer>figure");e.css("background-size",`${$(this).val()}%`),e.attr("data-scale",$(this).val())}),$(document).on("change","#inpZoomLogo",function(){localStorage.setItem("logoScale",$(this).val())}),$(document).on("input","#inpArtist",setArtistInput),$(window).ready(setArtistInput);const setSortMethod=function(){const e={auto(){let e=moment().tz(Intl.DateTimeFormat().resolvedOptions().timeZone).zoneAbbr(),t=TZ_ALL,a=t[e];$("#tzAbbr").attr("value",e),$("#tzOffset").attr("value",a),$("#timezoneSettings>p>span").text(`${e}/${a}`)},common(){$("#tzAbbr").html("<option value='' selected='selected' disabled>-SELECT TIMEZONE-</option>");let e,t=TZ_COMMONS;for(const a in t){if(e=a,e.length<5)for(let t=e.length;t<5;t++)e=e.concat("","&nbsp;");$("#tzAbbr").append(`<option value="${a}">${e} || ${t[a]}</option>`)}},all(){let e;$("#tzAbbr").html("<option value='' selected='selected' disabled>-SELECT TIMEZONE-</option>");for(const t in TZ_ALL){if(e=t,e.length<5)for(let t=e.length;t<5;t++)e=e.concat("","&nbsp;");$("#tzAbbr").append(`<option value="${t}">${e} || ${TZ_ALL[t]}</option>`)}},offset(){let e=$("input[name='utc_gmt']:checked").val().toUpperCase();$("#tzAbbr").html("<option value='' selected='selected' disabled>-SELECT LABEL-</option>"),$("#tzOffset").html("<option value='' selected='selected' disabled>-SELECT OFFSET-</option>");let t,a=TZ_OFFSETS;for(const o in a){if(t=o,t.length<5)for(let e=t.length;e<5;e++)t=t.concat("","&nbsp;");$("#tzOffset").append(`<option value="${o}">${e}${o}</option>`)}},manual(){}};let t=$("#selectSort").val();switch(t){case"common":$("#timezoneSettings").html("\n                <label for=\"tzAbbr\">Common Timezones:</label>\n                <section> \n                    <select name='tzAbbr' id='tzAbbr' data-sort='none'>\n                    </select>\n                </section>\n            "),tzInfo=e.common();break;case"all":$("#timezoneSettings").html("\n                <label for=\"tzAbbr\">All Timezones:</label>\n                <section>    \n                    <select name='tzAbbr' id='tzAbbr' data-sort='none'></select>\n                </section>\n            "),tzInfo=e.all();break;case"offset":$("#timezoneSettings").html("\n                <label for=\"tzOffset\">Timezone Offsets:</label>\n                <section>\n                    <table>\n                        <tr>\n                            <td id=\"tdUTC_GMT\">GMT:</td>\n                            <td>\n                                <select name='tzOffset' id='tzOffset' data-sort='none'></select>\n                            </td>\n                        </tr>\n                        <tr class=\"disabled\">\n                            <td>Label:</td>\n                            <td>\n                                <select name='tzAbbr' id='tzAbbr' data-sort='none'></select>\n                            </td>\n                        </tr>\n                    </table>\n                </section>\n            "),tzInfo=e.offset();break;case"manual":$("#timezoneSettings").html('\n                <label for="tzAbbr">Manual Input:</label>\n                <section>  \n                    <table>\n                        <tr>\n                            <td>Label:</td>\n                            <td><input type="text" name="tzAbbr" id="tzAbbr" maxlength="5"></td>\n                        </tr>\n                        <tr>\n                            <td id="tdUTC_GMT">GMT:</td>\n                            <td><input type="text" name="tzOffset" id="tzOffset" maxlength="6"></td>\n                        </tr>\n                    </table>\n                </section>\n            ');break;default:$("#timezoneSettings").html('\n                <p>Found: <span></span></p>\n                <label for="tzAbbr">Overwrite Label:</label>\n                <section>\n                    <input type="text" name="tzAbbr" id="tzAbbr" value="">\n                </section>\n                <input type="text" name="tzOffset" id="tzOffset" disabled value="0">\n            '),tzInfo=e.auto()}$("*[data-sort='none']").attr("data-sort",t)};$(document).on("change","#selectSort",setSortMethod),$(document).on("click","#timezone",function(e){$("html, body").animate({scrollTop:$("#fsTimezone").offset().top},300,function(){$("#fsTimezone").removeClass("blink"),$("#fsTimezone").addClass("blink")}),e.preventDefault()}),$(document).on("change","select#tzOffset",setAbbreviations),$(document).on("input","#tzAbbr",setTimezoneFromDropdown),$(document).on("input","#tzAbbr[type=text]",setTimezoneManually),$(document).on("input","#tzOffset[type=text]",setTimezoneManually),$(document).on("change","input[type=radio][name=utc_gmt]",swapUTC),$(document).on("click","#btnSaveString",function(){let e=$("#inpOfflineString").val();""!=e&&(localStorage.setItem("offlineString",e),$(".streamTitle").attr("placeholder",e))}),$(document).on("change","#inpAutoWeek",function(){let e=$("#inpAutoWeek").is(":checked");localStorage.setItem("autoDate",e)}),$(document).on("click","#saveTimezone",function(){let e=$("#tzAbbr").val().toUpperCase(),t=$("input[name='utc_gmt']:checked").val();localStorage.setItem("utc_gmt",t.toString());let a=$("#selectSort").val();if("auto"==a&&($("#tzAbbr").val()in TZ_ALL?$("#timezone").html(`${e}<br>${t}${TZ_ALL[e]}`):(e=moment().tz(Intl.DateTimeFormat().resolvedOptions().timeZone).zoneAbbr(),$("#timezone").html(`${e}<br>${t}${TZ_ALL[e]}`),$("#tzAbbr").val(e),$("#tzOffset").val(TZ_ALL[e]))),e in TZ_ALL)try{localStorage.setItem("timezone",e.toString());try{let t=$("#tzOffset").val();""!=t?localStorage.setItem("offsetOverwrite",t.toString()):localStorage.setItem("offsetOverwrite","none"),alert("Timezone saved!")}catch(e){localStorage.setItem("offsetOverwrite","none"),alert("Timezone saved!")}}catch(e){alert("Please make sure to set a real timezone!")}else alert("Please make sure to set a real timezone!")}),$(document).on("change","#inpTheme",function(){localStorage.setItem("theme",$(this).val()),setTheme($(this).val())}),$(document).on("focusout",".streamTitle",rememberSchedule),$(document).on("focusout",".streamTime",rememberSchedule),$(document).on("change","#inpRemember",function(){localStorage.setItem("rememberSchedule",$(this).prop("checked"))}),$(document).on("click","#btnTest",function(e){}),$(document).on("click","#btnClearLocal",function(){try{localStorage.clear()}catch(e){console.log(`COULDN'T CLEAR LOCALSTORAGE.\n----------------------------\n   > ${e}`)}}),$(document).on("click","#btnShowLocalAll",function(){}),$(document).on("click","#btnImg",saveImage),$(document).on("click","#btnJson",saveJson);